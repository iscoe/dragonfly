{%- macro render_token(sentence, tok, max_col_width, has_annotations) -%}
<div class="df-section df-row">
  {%- for row in sentence.rows -%}
    {% if loop.index == 1 %}{# Tokens #}
      {%- if has_annotations -%}
    <div class="df-token noselect" id="df-token-{{ sentence.index }}-{{ tok }}"
         data-tag="{{ row.annotations[tok] }}">{{ row.strings[tok] }}</div>
      {%- else -%}
    <div class="df-token" id="df-token-{{ sentence.index }}-{{ tok }}">{{ row.strings[tok] }}</div>
      {%- endif -%}
    {%- else -%}{# Non-Tokens #}
      {%- if row.adjudicate -%}
        {%- set tok_class = "df-adjudicate" -%}
      {%- else -%}
        {%- set tok_class = "" -%}
      {%- endif -%}
      {%- if row.strings[tok]|length > max_col_width -%}
        {%- set display_text = row.strings[tok][:max_col_width] + "â€¦" -%}
        {%- if row.strings[tok]|length > 400 -%}
          {%- set tooltip_text = row.strings[tok][:400] -%}
        {%- else -%}
          {%- set tooltip_text = row.strings[tok] -%}
        {%- endif -%}
      {%- else -%}
        {%- set display_text = row.strings[tok] -%}
      {%- endif -%}
    <div class="{{ tok_class }}" {% if row.strings[tok]|length > max_col_width %} data-toggle="tooltip" title="{{ tooltip_text }}" {% endif %}>{{ display_text }}</div>
    {%- endif -%}
  {%- endfor -%}
</div>
{%- endmacro -%}